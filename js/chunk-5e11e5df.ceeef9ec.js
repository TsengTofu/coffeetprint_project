(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5e11e5df"],{1425:function(e,t,a){},2532:function(e,t,a){"use strict";var c=a("23e7"),o=a("5a34"),n=a("1d80"),r=a("ab13");c({target:"String",proto:!0,forced:!r("includes")},{includes:function(e){return!!~String(n(this)).indexOf(o(e),arguments.length>1?arguments[1]:void 0)}})},"49d3":function(e,t,a){},"4de4":function(e,t,a){"use strict";var c=a("23e7"),o=a("b727").filter,n=a("1dde"),r=n("filter");c({target:"Array",proto:!0,forced:!r},{filter:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},"5a34":function(e,t,a){var c=a("44e7");e.exports=function(e){if(c(e))throw TypeError("The method doesn't accept regular expressions");return e}},"5d74":function(e,t,a){"use strict";a.r(t);var c=a("7a23"),o=Object(c["withScopeId"])("data-v-b9226676");Object(c["pushScopeId"])("data-v-b9226676");var n={class:"cafe_wrapper"},r=Object(c["createVNode"])("div",{class:"top_banner container-fluid"},[Object(c["createVNode"])("div",{class:"describe"},[Object(c["createVNode"])("p",null,"看看有哪些咖啡廳"),Object(c["createVNode"])("span",null,"找個喜歡的角落")])],-1),i={class:"cafe_outer container"};Object(c["popScopeId"])();var s=o((function(e,t,a,o,s,l){var d=Object(c["resolveComponent"])("CafeListComponent");return Object(c["openBlock"])(),Object(c["createBlock"])("div",n,[r,Object(c["createVNode"])("div",i,[Object(c["createVNode"])(d)])])})),l=(a("99af"),a("4de4"),a("cbd2")),d={name:"Products",components:{CafeListComponent:l["a"]},data:function(){return{all_cafe_list:[],temp_cafe_list:[]}},methods:{getAllCafeList:function(){var e=this,t="".concat("https://vue3-course-api.hexschool.io","/api/").concat("tofutseng","/products/all");this.axios.get(t).then((function(t){var a=t.data.success;if(a){var c=t.data.products;e.all_cafe_list=c}else e.$swal({title:"出了點錯誤，請稍後再嘗試，謝謝。",icon:"error"})})).catch((function(){e.$swal({title:"出了點錯誤，請稍後再嘗試，謝謝。",icon:"error"})}))},filterCategory:function(e){this.temp_cafe_list=this.all_cafe_list.filter((function(t){return t.category===e}))}},mounted:function(){this.getAllCafeList()}};a("f396");d.render=s,d.__scopeId="data-v-b9226676";t["default"]=d},"620a":function(e,t,a){"use strict";a("49d3")},"65ff":function(e,t,a){},"8f27":function(e,t,a){"use strict";var c=a("7a23"),o=Object(c["withScopeId"])("data-v-6ad9cb6a");Object(c["pushScopeId"])("data-v-6ad9cb6a");var n={"aria-label":"Page navigation example",ref:"pagination"},r={class:"pagination"},i=Object(c["createVNode"])("a",{class:"page-link",href:"#","aria-label":"Previous"},[Object(c["createVNode"])("span",{"aria-hidden":"true"},"«")],-1),s={class:"page-link",href:"#"},l=Object(c["createVNode"])("a",{class:"page-link",href:"#","aria-label":"Next"},[Object(c["createVNode"])("span",{"aria-hidden":"true"},"»")],-1);Object(c["popScopeId"])();var d=o((function(e,t,a,o,d,u){return Object(c["openBlock"])(),Object(c["createBlock"])("nav",n,[Object(c["createVNode"])("ul",r,[Object(c["createVNode"])("li",{class:["page-item",a.pagination_object.has_pre?null:"disabled"],onClick:t[1]||(t[1]=Object(c["withModifiers"])((function(e){return u.onChangePage(a.pagination_object.current_page-1)}),["prevent"]))},[i],2),(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],null,Object(c["renderList"])(a.pagination_object.total_pages,(function(e,t){return Object(c["openBlock"])(),Object(c["createBlock"])("li",{class:["page-item",a.pagination_object.current_page===t+1?"active":null],key:"page_"+t,onClick:Object(c["withModifiers"])((function(e){return u.onChangePage(t+1)}),["prevent"])},[Object(c["createVNode"])("a",s,Object(c["toDisplayString"])(t+1),1)],10,["onClick"])})),128)),Object(c["createVNode"])("li",{class:["page-item",a.pagination_object.has_next?null:"disabled"],onClick:t[2]||(t[2]=Object(c["withModifiers"])((function(e){return u.onChangePage(a.pagination_object.current_page+1)}),["prevent"]))},[l],2)])],512)})),u={name:"PaginationComponent",props:{pagination_object:Object},emits:["emit-change-page"],data:function(){return{current_page:this.pagination_object.current_page,page_alert_msg:""}},methods:{onChangePage:function(e){0===e||e>this.pagination_object.total_pages||(this.current_page=e,this.$emit("emit-change-page",this.current_page))}},mounted:function(){}};a("a720");u.render=d,u.__scopeId="data-v-6ad9cb6a";t["a"]=u},a434:function(e,t,a){"use strict";var c=a("23e7"),o=a("23cb"),n=a("a691"),r=a("50c4"),i=a("7b0b"),s=a("65f0"),l=a("8418"),d=a("1dde"),u=d("splice"),f=Math.max,p=Math.min,b=9007199254740991,g="Maximum allowed length exceeded";c({target:"Array",proto:!0,forced:!u},{splice:function(e,t){var a,c,d,u,j,O,v=i(this),h=r(v.length),m=o(e,h),_=arguments.length;if(0===_?a=c=0:1===_?(a=0,c=h-m):(a=_-2,c=p(f(n(t),0),h-m)),h+a-c>b)throw TypeError(g);for(d=s(v,c),u=0;u<c;u++)j=m+u,j in v&&l(d,u,v[j]);if(d.length=c,a<c){for(u=m;u<h-c;u++)j=u+c,O=u+a,j in v?v[O]=v[j]:delete v[O];for(u=h;u>h-c+a;u--)delete v[u-1]}else if(a>c)for(u=h-c;u>m;u--)j=u+c-1,O=u+a-1,j in v?v[O]=v[j]:delete v[O];for(u=0;u<a;u++)v[u+m]=arguments[u+2];return v.length=h-c+a,d}})},a720:function(e,t,a){"use strict";a("1425")},ab13:function(e,t,a){var c=a("b622"),o=c("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(a){try{return t[o]=!1,"/./"[e](t)}catch(c){}}return!1}},be33:function(e,t,a){},c341:function(e,t,a){"use strict";function c(e){var t=function(t){var a=JSON.stringify(t);localStorage.setItem(e,a)},a=function(){return JSON.parse(localStorage.getItem(e))},c=function(){return localStorage.removeItem(e)};return{saveItem:t,getItem:a,removeItem:c}}a.d(t,"a",(function(){return c}))},caad:function(e,t,a){"use strict";var c=a("23e7"),o=a("4d64").includes,n=a("44d2");c({target:"Array",proto:!0},{includes:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),n("includes")},cbd2:function(e,t,a){"use strict";a("caad"),a("2532");var c=a("7a23"),o=Object(c["withScopeId"])("data-v-dc799f3c");Object(c["pushScopeId"])("data-v-dc799f3c");var n={key:0,class:"list-unstyled row row-cols-1 row-cols-md-5"},r={key:1,class:"list-unstyled row row-cols-1 row-cols-md-2 g-3"};Object(c["popScopeId"])();var i=o((function(e,t,a,o,i,s){var l=Object(c["resolveComponent"])("CafeCardComponent"),d=Object(c["resolveComponent"])("CafeGridViewCardComponent"),u=Object(c["resolveComponent"])("PaginationComponent");return Object(c["openBlock"])(),Object(c["createBlock"])(c["Fragment"],null,["grid"===a.switch_status?(Object(c["openBlock"])(),Object(c["createBlock"])("ul",n,[(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],null,Object(c["renderList"])(i.productData,(function(e,t){return Object(c["openBlock"])(),Object(c["createBlock"])(l,{key:"cafe_"+t,order:t,singleCafe:e,is_favorite:i.favorite_list.includes(e.id)},null,8,["order","singleCafe","is_favorite"])})),128))])):(Object(c["openBlock"])(),Object(c["createBlock"])("ul",r,[(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],null,Object(c["renderList"])(i.productData,(function(e,t){return Object(c["openBlock"])(),Object(c["createBlock"])(d,{key:"grid_"+t,singleCafe:e,is_favorite:i.favorite_list.includes(e.id)},null,8,["singleCafe","is_favorite"])})),128))])),Object(c["createVNode"])(u,{pagination_object:i.pagination,onEmitChangePage:s.getCafeListData},null,8,["pagination_object","onEmitChangePage"])],64)})),s=(a("99af"),a("a434"),a("a697")),l=(a("a4d3"),a("e01a"),Object(c["withScopeId"])("data-v-5f8a80e3"));Object(c["pushScopeId"])("data-v-5f8a80e3");var d={class:"col"},u={class:"row g-0"},f={class:"col image"},p={key:0,class:"material-icons-round"},b={key:1,class:"material-icons-round"},g={class:"col"},j={class:"card-body"},O={class:"d-flex title"},v={class:"category"},h={key:0,class:"material-icons-round"},m={key:1,class:"material-icons-round"},_={class:"right_text"},C={class:"d-flex stars"},k={class:"card-text"},N={class:"text-muted location d-flex align-items-center"},V=Object(c["createVNode"])("span",{class:"material-icons-round"},"place",-1),w={class:"nearby"},y={class:"d-flex bottom_block"},B={class:"d-flex flex-column left_block"},x=Object(c["createTextVNode"])("剩下 "),I=Object(c["createTextVNode"])(" 張"),S=Object(c["createTextVNode"])("NT$ "),L=Object(c["createVNode"])("span",{class:"material-icons-round"},"shopping_cart",-1),T=Object(c["createTextVNode"])(" 我要購買 ");Object(c["popScopeId"])();var P=l((function(e,t,a,o,n,r){return Object(c["openBlock"])(),Object(c["createBlock"])("li",d,[Object(c["createVNode"])("div",{class:"card",onClick:t[3]||(t[3]=function(e){return r.goToCafeDetail(a.singleCafe.id)})},[Object(c["createVNode"])("div",u,[Object(c["createVNode"])("div",f,[Object(c["createVNode"])("div",{class:"cover_image",style:{backgroundImage:"url("+a.singleCafe.imageUrl+")"}},null,4),Object(c["createVNode"])("button",{type:"button",class:"btn btn-primary add_to_favorite d-flex",onClick:t[1]||(t[1]=Object(c["withModifiers"])((function(e){return r.addToFavorite(a.singleCafe.id)}),["stop"]))},[a.is_favorite?(Object(c["openBlock"])(),Object(c["createBlock"])("span",p," favorite ")):(Object(c["openBlock"])(),Object(c["createBlock"])("span",b," favorite_border "))])]),Object(c["createVNode"])("div",g,[Object(c["createVNode"])("div",j,[Object(c["createVNode"])("div",O,[Object(c["createVNode"])("b",v,["餐廳"===a.singleCafe.category?(Object(c["openBlock"])(),Object(c["createBlock"])("span",h," restaurant ")):(Object(c["openBlock"])(),Object(c["createBlock"])("span",m," free_breakfast "))]),Object(c["createVNode"])("div",_,[Object(c["createVNode"])("h5",null,Object(c["toDisplayString"])(a.singleCafe.title),1),Object(c["createVNode"])("p",C,[(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],null,Object(c["renderList"])(parseInt(a.singleCafe.star_rate),(function(e,t){return Object(c["openBlock"])(),Object(c["createBlock"])("span",{key:"star_"+t,class:"material-icons-round"}," star ")})),128)),(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],null,Object(c["renderList"])(5-parseInt(a.singleCafe.star_rate),(function(e,t){return Object(c["openBlock"])(),Object(c["createBlock"])("span",{key:"star_"+t,class:"material-icons-round"}," star_border ")})),128))])])]),Object(c["createVNode"])("p",k,[Object(c["createVNode"])("small",N,[V,Object(c["createTextVNode"])(" 台灣｜"+Object(c["toDisplayString"])(a.singleCafe.area)+" ",1),Object(c["createVNode"])("b",w,Object(c["toDisplayString"])(a.singleCafe.nearby),1)])]),Object(c["createVNode"])("p",{class:"card-text describe",innerHTML:a.singleCafe.description},null,8,["innerHTML"]),Object(c["createVNode"])("div",y,[Object(c["createVNode"])("div",B,[Object(c["createVNode"])("p",null,[x,Object(c["createVNode"])("span",null,Object(c["toDisplayString"])(a.singleCafe.num),1),I]),Object(c["createVNode"])("p",null,[S,Object(c["createVNode"])("span",null,Object(c["toDisplayString"])(a.singleCafe.price.toLocaleString()),1)])]),Object(c["createVNode"])("button",{type:"button",class:"btn btn-primary d-flex justify-content-center align-items-center add_to_cart",onClick:t[2]||(t[2]=Object(c["withModifiers"])((function(e){return r.addToCart(a.singleCafe.id)}),["stop"]))},[L,T])])])])])])])})),D={name:"CafeGridViewCardComponent",props:{singleCafe:Object,is_favorite:Boolean},components:{},data:function(){return{isProcess:!1}},methods:{goToCafeDetail:function(e){this.$router.push("/detail/".concat(e))},addToCart:function(e){var t=this;if(!this.isProcess){this.isProcess=!0;var a="".concat("https://vue3-course-api.hexschool.io","/api/").concat("tofutseng","/cart");this.axios.post(a,{data:{product_id:e,qty:1}}).then((function(e){var a=e.data.success;a?(t.$swal("成功加入購物車！"),t.emitter.emit("updateCartList"),t.isProcess=!1):t.$swal({title:"出了點錯誤，請稍後再嘗試，謝謝。",icon:"error"})})).catch((function(){t.$swal({title:"出了點錯誤，請稍後再嘗試，謝謝。",icon:"error"})}))}},addToFavorite:function(e){this.emitter.emit("addToFavoriteList",e)}},mounted:function(){}};a("620a");D.render=P,D.__scopeId="data-v-5f8a80e3";var F=D,$=a("8f27"),M=a("c341"),A={name:"CafeListComponent",components:{CafeCardComponent:s["a"],CafeGridViewCardComponent:F,PaginationComponent:$["a"]},props:{switch_status:String},data:function(){return{productData:[],pagination:{},favorite_list:[]}},methods:{getCafeListData:function(e){var t=this,a="".concat("https://vue3-course-api.hexschool.io","/api/").concat("tofutseng","/products?page=").concat(e);this.axios.get(a).then((function(e){var a=e.data.success;if(a){var c=e.data,o=c.products,n=c.pagination;t.productData=o,t.pagination=n}else t.$swal({title:"出了點錯誤，請稍後再嘗試，謝謝。",icon:"error"})})).catch((function(){t.$swal({title:"出了點錯誤，請稍後再嘗試，謝謝。",icon:"error"})}))},toggleFavorite:function(e){this.favorite_list.includes(e)?(this.favorite_list.splice(this.favorite_list.indexOf(e),1),this.$swal("已成功移除我的最愛！")):(this.favorite_list.push(e),this.$swal("已成功加入我的最愛！"))}},created:function(){var e=this;this.favorite_list=Object(M["a"])("CoffeetPrintFavorite").getItem()||[],this.emitter.on("addToFavoriteList",(function(t){e.toggleFavorite(t)}))},watch:{favorite_list:{handler:function(){Object(M["a"])("CoffeetPrintFavorite").saveItem(this.favorite_list)},deep:!0}},mounted:function(){this.getCafeListData()},unmounted:function(){this.emitter.off("addToFavoriteList")}};a("d356");A.render=i,A.__scopeId="data-v-dc799f3c";t["a"]=A},d356:function(e,t,a){"use strict";a("65ff")},f396:function(e,t,a){"use strict";a("be33")}}]);
//# sourceMappingURL=chunk-5e11e5df.ceeef9ec.js.map